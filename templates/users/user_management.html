{% extends "base.html" %}

{% block title %}User Management | {{ block.super }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2">User Management</h1>
        <button class="btn btn-primary" 
                hx-get="{% url 'users:user-create' %}" 
                hx-target="#htmx-modal-dialog" 
                hx-swap="innerHTML"
                aria-label="Add new user">
            <i class="fa-solid fa-plus me-2"></i>Add New User
        </button>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-search"></i></span>
                <input type="search" 
                       class="form-control" 
                       name="q" 
                       placeholder="Search by username, email, or name..."
                       hx-get="{% url 'users:user-list' %}"
                       hx-trigger="keyup changed delay:500ms, search"
                       hx-target="#user-list-container"
                       hx-indicator="#user-list-spinner">
            </div>
        </div>
        <div class="card-body p-0">
            <div class="text-center p-3" id="user-list-spinner">
                <div class="spinner-border text-primary htmx-indicator" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            
            <div id="user-list-container" 
                 hx-get="{% url 'users:user-list' %}" 
                 hx-trigger="load, userListChanged from:body"
                 hx-swap="innerHTML">
                </div>
        </div>
    </div>
</div>
{% endblock %}